<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/sjy_01_home-2.css">
    <!-- <link rel="stylesheet" href="module.scss"> -->
    <title>home-2</title>
</head>
<body>

    <!--------------------------------------- 2-1(home) ------------------------------------>
    <!-- top-main-nav -->
    <section class="top-main-nav">
        <h2 class="blind">상단메인네비게이션</h2>
        <div class="text">감귤마켓 피드</div>
        <div class="search"></div>
    </section>

    <div class="homepostBox">    
    </div>

    <!-- tab-menu -->
    <section class="tab-menu">
        <h2 class="blind">탭메뉴</h2>
        <div class="home"><span></span><p>홈</p></div>
        <div class="chatting"><span></span><p>채팅</p></div>
        <div class="create"><span></span><p>게시물 작성</p></div>
        <div class="profile"><span></span><p>프로필</p></div>
    </section>

    <script>
        const cont = document.querySelector(".homepostBox");
        const url = "http://146.56.183.55:5050/";
        async function mylist() {
            const res = await fetch(url+"post/sinhan/userpost", {
                headers: {
                    "Authorization" : "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYxZDU3ODk0NmI4MjE2ZmM1NjY4NzZmYSIsImV4cCI6MTY0NjU2NDI4MiwiaWF0IjoxNjQxMzgwMjgyfQ.tHh7nnvnaQM0dn5LlPJPN8DeL8ecjKaGUsTrv_mbqnE",
                    "Content-Type": "application/json"
                }
            })
            resJson = await res.json();
            for (const data of resJson.post) {
                cont.innerHTML += 
                `<section class="home-post">
                    <section class="leftSide">
                    <button type="button" class="proPic"><img src="../img/basic-profile-img-.png" alt="프로필이미지"></button>
                    </section>
                    <section class="rightSide">
                    <div class="menuWrap">
                        <div class="proId">
                        <p>${data.author._id}</p>
                        <p>@ ${data.author._id.split('@')[1]}</p>
                        </div>
                        <button class="menuBtn" type="button"><img src="../img/more-icon.png" alt="더보기아이콘"></button>
                    </div>
                    <div class="cntTxt">
                        <p>${data.content}</p>
                    </div>
                    <div class="cntImg">
                        <img src="../img/${data.image}" alt="콘텐트이미지">
                    </div>
                    <div class="btnWrap">
                        <div class="btnLike">
                        <button type="button"><img src="../img/icon-heart.png" alt="좋아요아이콘"></button>
                        <p>${data.heartCount}</p>
                        </div>
                        <div class="btnCmt">
                        <button type="button"><img src="../img/icon-message-circle.png" alt="댓글아이콘"></button>
                        <p>${data.commentCount}</p>
                        </div>
                    </div>
                    <p class="date">${data.createdAt}</p>
                    </section>
                </section> `
            }
            console.log(resJson);
            console.log("리스트");
        }
        mylist();
    </script>
</body>
</html>


